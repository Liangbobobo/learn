# iso/osi
一般意义上网络工作的模型，国际标准化组织系统互连International Organization for Standardization Open System interconnection，即ios/osi网络参考模型，是七层模型。  
OSI更象是一个模型，而不是一个被接受的标准。这是因为许多公司已经在他们的产品中实现了另外一些协议。

## PDU-protocol data unit：  
指对等层次之间传递的数据单位。通常第一层物理层的PDU是数据为bit，第二层数据链路层的PDU被称为数据帧frame，第三层网络层的PDU被称为数据包packet，第四层传输层的PDU被称为数据段segment，其他更高层次的的PDU是报文。

## 协议栈-protocol stack
由于七层的iso/osi网络参考模型结构精确的描绘实现了多少个网络协议族（包括Tcp/Ip）,因此在特定计算机上实现时，通常把映射到这种模型中的硬件和软件部分称为协议栈protocol stack，于是网络接口卡（network interface card ，NIC，简称网卡，又称为以太网卡、网络适配器、网络接口、网络接口卡）、支持操作系统与网卡对话的驱动程序、构成Tcp/Ip其他分层的各种软件部件都可以称为协议栈，称为该机器上的Tcp/IP协议栈。  
百科：协议栈指网络中各层协议的总和，形象的反映了一个网络中文件传输的过程

## osi七层模型
1. 物理层  
physical layer：包括物理传输介质（电缆或者无线介质），任何网络都必须通过传输介质来发送和接收信号，这些信号构成了网络通信的物理表示。    
任务是建立、维持、断开网络连接，管理网络介质到协议栈的通信，把计算机的出站数据转换为网络所用的信号，对于入站消息，把来自网络介质的信号转换为计算机网卡接收的bit。  
physical layer的PDU由特定的串行信号组成，并对应数据链路层里数据帧的比特位。  

2. 数据链路层-Data link layer    
任务：  
Ⅰ、确保在发送方实现物理层数据的可靠传输，在接收方检验所收到的数据的可靠性；  
Ⅱ、管理跨网络介质的、从一台计算机到另一台计算机上、在单个逻辑或者物理电缆段上点对点的传输（point-to-point transmission）；  
Ⅲ、通过唯一标识每一个网卡的专用地址，识别本地介质上的每个设备，由于data link layer管理网卡之间的点对点通信，它也处理这些网卡所插入的计算机之间的局域网连接。  
Ⅳ、处理从发送方到接收方的数据串行化，比特位必须映射为相应的信号，以便从发送方传输到接收方，而在接收方则执行相反过程，为此，data link layer还能控制从发送方到接收方数据的传输节奏，这个过程称为介质流控制（media flow control），当本地阻塞时进行响应，避免网络介质被本地数据流淹没。最后，当出站PDU可以传输时，数据链路层请求开始数据传输，并处理接收和构造入站数据的入站PDU。  
Ⅴ、某些组网类型应用到网络通信时，数据链路层还负责管理这些连接类型。特定链接使用电路交换的通信技术时，就是这种情况的典型案例，如电话系统，电路交换（也称为线路交换、电气交换、模拟或数字电路交换）在传输期间为两个端点建立一条专用的通道。TCP/IP能使用这样的通信链路，但对他们的处理与其他用于数据传输的点到点链路没有任何差别  

data link layer的PDU必须在格式、结构以及最大数据长度上，满足映射到网络介质的特殊的比特位模式      

3. Network layer 网络层   
网络层中PDU称为数据包  
任务和功能：  
Ⅰ、处理网络位置标记的地方，处理网络上与每个机器相关的逻辑寻址问题，逻辑寻址允许Domain name system域名系统将分配给机器的、人们可以阅读的名称与唯一的、机器可阅读的数字地址关联起来。当数据流的源地址和目标地址不在网络上的同一个物理段时，网络层也使用寻址信息来确定如何把PDU从发送方传递到接收方。    
Ⅱ、网络层的主要功能是对Internet上的每一台主机提供一个全球唯一地址，并提供主机之间的通信路径。   
Ⅲ、network layer具体化了不同IP地址之间多个并发连接的表示方法，多个应用程序能够同时保持网络连接。网络层能识别一个网络连接属于计算机上的哪个进程或应用程序，并且不仅可以把数据流从发送发正确的传递到接收方，而且也能够把入站数据传递给接收方计算机的特定进程或应用程序
Ⅳ、网络层足够灵活，能够识别和使用位于发送发和接收方之间的多个路由，同时保持正在进行中的通信不中断。   
使用一个或多个路由，把单个PDU从发送方转发或中继给接收方的技术称为分组交换packet switching，这也是网络层以每个PDU为基础进行转发和中继的原因。
Ⅴ、网络层对与路由相关的延迟也是敏感的，在从发送方往接收方转发数据的同时，能够管理通过这些路由的数据流，这个过程称为阻塞控制congestion control，用于当网络上发生大量活动时避免过载。   

4. transport layer 传输层   
传输层使用的PDU称为分段segment或称为数据段data segment  
任务和功能：  
Ⅰ、确保从发送方到接收方PDU可靠的端对端传输。为此，传输层包含了端到端的错误检测和错误恢复数据。这些数据通常作为传输层PDU尾部的一部分进行打包在传递之前和之后计算一个称为校验和checksum的特殊值，之后进行对比，确定是否进行了无错误的传输。  
从发送方到接收方可以发送的数据量在长度上不受限制，但是从端到端能传输这些数据的容器具有固定的最大长度称为最大传输单元maximum transmission unite（mtu），因此，传输层也必须处理分段和重组操作。分段segmentation就是把很长的消息切分成为一连串的数据段，称为数据段segment，其中每一个数据块都表示为在发送发与接收方之间网络介质能够传送的最大数据载荷。重组reassembly，描述了这样的过程， 将发送的数据块按照其原始顺序重新组织在一起，把传输的消息构成分段前的样子。   
正常情况下，分段发生在发送方，它将TCP的数据载荷拆分为一连串固定长度的TCP数据包载荷，起正式名称时数据段。在接收方，TCP将这些数据段合成在一起，这个合成过程称为重组。   
这种状况唯一发生例外的情形是：当发送方生成的TCP数据段要在其MTU小于该数据段的链路上传输的时候，这时将进行分片fragmentation，它发生在IP层，并得到一个特殊的IP首部标志，在那些现在已经分段的数据包能够被转发到路由路径中下一个主机之前，而主机连接到具有较小MTU链路上的时候。然而，直到这些分片数据包到达接收主机之后，这些分片数据包才会被重组，依据入站数据包结构的要求，在接收主机上处理分片以及原始分段数据的重组。   
Ⅱ、传输层具有在重组过程中请求重传所有出错或丢失PDU的工程。

5. session layer 会话层   
这一层的PDU通常称为会话PDU（session PDU）或SPDU。   
任务和功能：  
Ⅰ、session layer是在发送方和接收方之间进行通信时创建、维持、终止或断开连接的地方。因此，session layer定义了一种机制，允许发送方和接收方启动或停止请求会话，以及当双方之间发生拥塞时仍然能保持对话。    
Ⅱ、session layer包含了一种称为检查点checkpoint的机制来维持可靠会话。checkpoint定义了一个最接近成功通信的点，并且定义了当发生内容丢失或损坏时需要回滚以便回复丢失或损坏数据的点，同样，会话层还定义了当会话出现不同步时，需要重新同步化的机制。   
Ⅲ、session layer的主要任务是负责两个网络参与者之间进行的通信，这两者在通信过程中通常交换一系列的消息或PDU。这种交换的一种实列：用户登陆到数据库上（建立阶段），输入一连串的查询（数据交换阶段），完成任务后退出登录（断开连接）。   

6. presentation layer 表示层  
任务和功能：  
Ⅰ、管理到网络上（从其下到协议栈）以及到特定机器/应用程序上（从其上到协议栈）的数据的表示方式。即，表示层处理从一般的、面向网络形式表示的数据到更专用的、面向平台形式表示的数据的变换，以及完成相反方向的变换。这使得完全不同类型的计算机，他们可能是不同的方式表示数值和字符，能够跨网络进行通信。  
Ⅱ、通常有一种特殊的操作系统驱动程序驻留在表示层，这种驱动程序有时称为重定向器（微软术语，redirector），或网络外壳（network shell，novell NetWare，unix术语）。这种驱动程序的任务就是把对网络资源的请求与对本地资源的请求区分开，并把这样的请求重定向到恰当的本地子系统或远程子系统上。这样，计算机无需辨别要访问资源的类型，就能够使用单个子系统访问各种资源，无论这种资源驻留在本地计算机上还是驻留在跨网络的远程计算机上。表示层使得开发人员可以很容易的构建能够随意访问本地或远程资源的应用程序。   
Ⅲ、表示层也能够为应用程序提供特殊的数据处理功能，包括协议变换（当应用程序使用的协议不同于网络通信所用协议时，例如在电子商务、数据库、出站消息的数据加密、入站消息的数据解密、出站消息的压缩，入站消息的解压）对于这种类型的服务，无论发送发的表示层做了什么，接收方的表示层都必须予以复原，从而使连接的双方在某个时刻分享相似的数据视图。   

7. application layer 应用层   
任务和功能：  
Ⅰ、应用层定义了应用程序能够从网络上请求使用的几种类型的服务，并且规定了在从应用程序接收消息或向应用程序发送消息时，数据所必须采用的格式。   
Ⅱ、应用层定义了一组对网络的访问控制，决定了应用程序能够请求网络完成什么类型的事情，或网络支持什么类型的活动。如，应用层规定了对特定文件或服务的访问权限，以及允许哪些用户能对特定数据执行什么类型的动作。   
